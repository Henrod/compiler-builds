{"version":3,"sources":["../../../../../modules/@angular/compiler/src/output/abstract_js_emitter.ts"],"names":[],"mappings":"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","file":"abstract_js_emitter.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {isPresent} from '../facade/lang';\n\nimport {AbstractEmitterVisitor, CATCH_ERROR_VAR, CATCH_STACK_VAR, EmitterVisitorContext} from './abstract_emitter';\nimport * as o from './output_ast';\n/**\n * @abstract\n */\nexport abstract class AbstractJsEmitterVisitor extends AbstractEmitterVisitor {\nconstructor() { super(false); }\n/**\n * @param {?} stmt\n * @param {?} ctx\n * @return {?}\n */\nvisitDeclareClassStmt(stmt: o.ClassStmt, ctx: EmitterVisitorContext): any {\n    ctx.pushClass(stmt);\n    this._visitClassConstructor(stmt, ctx);\n\n    if (isPresent(stmt.parent)) {\n      ctx.print(`${stmt.name}.prototype = Object.create(`);\n      stmt.parent.visitExpression(this, ctx);\n      ctx.println(`.prototype);`);\n    }\n    stmt.getters.forEach((getter) => this._visitClassGetter(stmt, getter, ctx));\n    stmt.methods.forEach((method) => this._visitClassMethod(stmt, method, ctx));\n    ctx.popClass();\n    return null;\n  }\n/**\n * @param {?} stmt\n * @param {?} ctx\n * @return {?}\n */\nprivate _visitClassConstructor(stmt: o.ClassStmt, ctx: EmitterVisitorContext) {\n    ctx.print(`function ${stmt.name}(`);\n    if (isPresent(stmt.constructorMethod)) {\n      this._visitParams(stmt.constructorMethod.params, ctx);\n    }\n    ctx.println(`) {`);\n    ctx.incIndent();\n    if (isPresent(stmt.constructorMethod)) {\n      if (stmt.constructorMethod.body.length > 0) {\n        ctx.println(`var self = this;`);\n        this.visitAllStatements(stmt.constructorMethod.body, ctx);\n      }\n    }\n    ctx.decIndent();\n    ctx.println(`}`);\n  }\n/**\n * @param {?} stmt\n * @param {?} getter\n * @param {?} ctx\n * @return {?}\n */\nprivate _visitClassGetter(stmt: o.ClassStmt, getter: o.ClassGetter, ctx: EmitterVisitorContext) {\n    ctx.println(\n        `Object.defineProperty(${stmt.name}.prototype, '${getter.name}', { get: function() {`);\n    ctx.incIndent();\n    if (getter.body.length > 0) {\n      ctx.println(`var self = this;`);\n      this.visitAllStatements(getter.body, ctx);\n    }\n    ctx.decIndent();\n    ctx.println(`}});`);\n  }\n/**\n * @param {?} stmt\n * @param {?} method\n * @param {?} ctx\n * @return {?}\n */\nprivate _visitClassMethod(stmt: o.ClassStmt, method: o.ClassMethod, ctx: EmitterVisitorContext) {\n    ctx.print(`${stmt.name}.prototype.${method.name} = function(`);\n    this._visitParams(method.params, ctx);\n    ctx.println(`) {`);\n    ctx.incIndent();\n    if (method.body.length > 0) {\n      ctx.println(`var self = this;`);\n      this.visitAllStatements(method.body, ctx);\n    }\n    ctx.decIndent();\n    ctx.println(`};`);\n  }\n/**\n * @param {?} ast\n * @param {?} ctx\n * @return {?}\n */\nvisitReadVarExpr(ast: o.ReadVarExpr, ctx: EmitterVisitorContext): string {\n    if (ast.builtin === o.BuiltinVar.This) {\n      ctx.print('self');\n    } else if (ast.builtin === o.BuiltinVar.Super) {\n      throw new Error(\n          `'super' needs to be handled at a parent ast node, not at the variable level!`);\n    } else {\n      super.visitReadVarExpr(ast, ctx);\n    }\n    return null;\n  }\n/**\n * @param {?} stmt\n * @param {?} ctx\n * @return {?}\n */\nvisitDeclareVarStmt(stmt: o.DeclareVarStmt, ctx: EmitterVisitorContext): any {\n    ctx.print(`var ${stmt.name} = `);\n    stmt.value.visitExpression(this, ctx);\n    ctx.println(`;`);\n    return null;\n  }\n/**\n * @param {?} ast\n * @param {?} ctx\n * @return {?}\n */\nvisitCastExpr(ast: o.CastExpr, ctx: EmitterVisitorContext): any {\n    ast.value.visitExpression(this, ctx);\n    return null;\n  }\n/**\n * @param {?} expr\n * @param {?} ctx\n * @return {?}\n */\nvisitInvokeFunctionExpr(expr: o.InvokeFunctionExpr, ctx: EmitterVisitorContext): string {\n    const /** @type {?} */ fnExpr = expr.fn;\n    if (fnExpr instanceof o.ReadVarExpr && fnExpr.builtin === o.BuiltinVar.Super) {\n      ctx.currentClass.parent.visitExpression(this, ctx);\n      ctx.print(`.call(this`);\n      if (expr.args.length > 0) {\n        ctx.print(`, `);\n        this.visitAllExpressions(expr.args, ctx, ',');\n      }\n      ctx.print(`)`);\n    } else {\n      super.visitInvokeFunctionExpr(expr, ctx);\n    }\n    return null;\n  }\n/**\n * @param {?} ast\n * @param {?} ctx\n * @return {?}\n */\nvisitFunctionExpr(ast: o.FunctionExpr, ctx: EmitterVisitorContext): any {\n    ctx.print(`function(`);\n    this._visitParams(ast.params, ctx);\n    ctx.println(`) {`);\n    ctx.incIndent();\n    this.visitAllStatements(ast.statements, ctx);\n    ctx.decIndent();\n    ctx.print(`}`);\n    return null;\n  }\n/**\n * @param {?} stmt\n * @param {?} ctx\n * @return {?}\n */\nvisitDeclareFunctionStmt(stmt: o.DeclareFunctionStmt, ctx: EmitterVisitorContext): any {\n    ctx.print(`function ${stmt.name}(`);\n    this._visitParams(stmt.params, ctx);\n    ctx.println(`) {`);\n    ctx.incIndent();\n    this.visitAllStatements(stmt.statements, ctx);\n    ctx.decIndent();\n    ctx.println(`}`);\n    return null;\n  }\n/**\n * @param {?} stmt\n * @param {?} ctx\n * @return {?}\n */\nvisitTryCatchStmt(stmt: o.TryCatchStmt, ctx: EmitterVisitorContext): any {\n    ctx.println(`try {`);\n    ctx.incIndent();\n    this.visitAllStatements(stmt.bodyStmts, ctx);\n    ctx.decIndent();\n    ctx.println(`} catch (${CATCH_ERROR_VAR.name}) {`);\n    ctx.incIndent();\n    const /** @type {?} */ catchStmts =\n        [ /** @type {?} */((<o.Statement>CATCH_STACK_VAR.set(CATCH_ERROR_VAR.prop('stack')).toDeclStmt(null, [\n          o.StmtModifier.Final\n        ])))].concat(stmt.catchStmts);\n    this.visitAllStatements(catchStmts, ctx);\n    ctx.decIndent();\n    ctx.println(`}`);\n    return null;\n  }\n/**\n * @param {?} params\n * @param {?} ctx\n * @return {?}\n */\nprivate _visitParams(params: o.FnParam[], ctx: EmitterVisitorContext): void {\n    this.visitAllObjects(param => ctx.print(param.name), params, ctx, ',');\n  }\n/**\n * @param {?} method\n * @return {?}\n */\ngetBuiltinMethodName(method: o.BuiltinMethod): string {\n    let /** @type {?} */ name: string;\n    switch (method) {\n      case o.BuiltinMethod.ConcatArray:\n        name = 'concat';\n        break;\n      case o.BuiltinMethod.SubscribeObservable:\n        name = 'subscribe';\n        break;\n      case o.BuiltinMethod.Bind:\n        name = 'bind';\n        break;\n      default:\n        throw new Error(`Unknown builtin method: ${method}`);\n    }\n    return name;\n  }\n}\n"]}