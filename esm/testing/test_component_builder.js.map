{"version":3,"file":"test_component_builder.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/testing/test_component_builder.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {AnimationEntryMetadata, Compiler, ComponentFactory, Inject, Injectable, Injector, NgZone, Type} from '@angular/core';\nimport {ComponentFixture, ComponentFixtureNoNgZone, TestBed} from '@angular/core/testing';\n\nimport {ViewMetadata} from '../core_private';\nimport {TestComponentBuilder} from '../core_private_testing';\n// export {ViewMetadata} from '../core_private';\n\nimport {DirectiveResolver} from '../index';\nimport {MapWrapper} from '../src/facade/collection';\nimport {isPresent} from '../src/facade/lang';\nexport class OverridingTestComponentBuilder extends TestComponentBuilder {\n  /** @internal */\n  private _bindingsOverrides = new Map<Type<any>, any[]>();\n  /** @internal */\n  private _directiveOverrides = new Map<Type<any>, Map<Type<any>, Type<any>>>();\n  /** @internal */\n  private _templateOverrides = new Map<Type<any>, string>();\n  /** @internal */\n  private _animationOverrides = new Map<Type<any>, AnimationEntryMetadata[]>();\n  /** @internal */\n  private _viewBindingsOverrides = new Map<Type<any>, any[]>();\n  /** @internal */\n  private _viewOverrides = new Map<Type<any>, ViewMetadata>();\n\n  constructor( injector: Injector) { super(injector); }\n\n  /** @internal */\n  _clone(): OverridingTestComponentBuilder {\n    let clone = new OverridingTestComponentBuilder(this._injector);\n    clone._viewOverrides = MapWrapper.clone(this._viewOverrides);\n    clone._directiveOverrides = MapWrapper.clone(this._directiveOverrides);\n    clone._templateOverrides = MapWrapper.clone(this._templateOverrides);\n    clone._bindingsOverrides = MapWrapper.clone(this._bindingsOverrides);\n    clone._viewBindingsOverrides = MapWrapper.clone(this._viewBindingsOverrides);\n    return clone;\n  }\n\n  overrideTemplate(componentType: Type<any>, template: string): OverridingTestComponentBuilder {\n    let clone = this._clone();\n    clone._templateOverrides.set(componentType, template);\n    return clone;\n  }\n\n  overrideAnimations(componentType: Type<any>, animations: AnimationEntryMetadata[]):\n      TestComponentBuilder {\n    var clone = this._clone();\n    clone._animationOverrides.set(componentType, animations);\n    return clone;\n  }\n\n  overrideView(componentType: Type<any>, view: ViewMetadata): OverridingTestComponentBuilder {\n    let clone = this._clone();\n    clone._viewOverrides.set(componentType, view);\n    return clone;\n  }\n\n  overrideDirective(componentType: Type<any>, from: Type<any>, to: Type<any>):\n      OverridingTestComponentBuilder {\n    let clone = this._clone();\n    let overridesForComponent = clone._directiveOverrides.get(componentType);\n    if (!isPresent(overridesForComponent)) {\n      clone._directiveOverrides.set(componentType, new Map<Type<any>, Type<any>>());\n      overridesForComponent = clone._directiveOverrides.get(componentType);\n    }\n    overridesForComponent.set(from, to);\n    return clone;\n  }\n\n  overrideProviders(type: Type<any>, providers: any[]): OverridingTestComponentBuilder {\n    let clone = this._clone();\n    clone._bindingsOverrides.set(type, providers);\n    return clone;\n  }\n\n  overrideViewProviders(type: Type<any>, providers: any[]): OverridingTestComponentBuilder {\n    let clone = this._clone();\n    clone._viewBindingsOverrides.set(type, providers);\n    return clone;\n  }\n\n  createAsync<T>(rootComponentType: Type<T>): Promise<ComponentFixture<T>> {\n    this._applyMetadataOverrides();\n    return super.createAsync(rootComponentType);\n  }\n\n  createSync<T>(rootComponentType: Type<T>): ComponentFixture<T> {\n    this._applyMetadataOverrides();\n    return super.createSync(rootComponentType);\n  }\n\n  private _applyMetadataOverrides() {\n    let mockDirectiveResolver = this._injector.get(DirectiveResolver);\n    this._viewOverrides.forEach((view, type) => { mockDirectiveResolver.setView(type, view); });\n    this._templateOverrides.forEach(\n        (template, type) => mockDirectiveResolver.setInlineTemplate(type, template));\n    this._animationOverrides.forEach(\n        (animationsEntry, type) => mockDirectiveResolver.setAnimations(type, animationsEntry));\n    this._directiveOverrides.forEach((overrides, component) => {\n      overrides.forEach(\n          (to, from) => { mockDirectiveResolver.overrideViewDirective(component, from, to); });\n    });\n    this._bindingsOverrides.forEach(\n        (bindings, type) => mockDirectiveResolver.setProvidersOverride(type, bindings));\n    this._viewBindingsOverrides.forEach(\n        (bindings, type) => mockDirectiveResolver.setViewProvidersOverride(type, bindings));\n  }\n/** @nocollapse */\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: {type: Function, decorators?: DecoratorInvocation[]}[] = [\n{type: Injector, decorators: [{ type: Inject, args: [TestBed, ] }, ]},\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}